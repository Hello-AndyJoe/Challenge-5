$(function () {
  var textID;
  var userText;
// Listener for click event to save input text to local storage. 
  $(".saveBtn").click(function () {
    textID = $(this).parents().attr("id");
    userText = $(this).parents().find("> textarea").val();
    // Store value of specific textarea element to localstorage based on 
    // the parent of the textarea using key generated by the parent's ID
    localStorage.setItem(textID, userText); 

    console.log(textID);
    console.log(userText);
  });

// Styles the text boxes based on if the hour is the past, present or future and pulls saved items from
// from local storage and has them display in the corresponding text boxes.
  var timeBlockID;
  var timeBlockHour;

  $(document).ready(function () {
    $(".time-block").each(function () {
      var currentHour = dayjs().hour();
      console.log(currentHour);

      timeBlockID = $(this).attr("id");
      timeBlockHour = parseInt(timeBlockID.replace("hour-",""));
      console.log(timeBlockHour);

      // Adds a class to the specific time-block element 
      // based on if it's before, on or after the currentHour variable
      if (timeBlockHour < currentHour) {
        $(this).addClass("past");
      } else if (timeBlockHour > currentHour) {
        $(this).addClass("future");
      } else if (timeBlockHour = currentHour) {
        $(this).addClass("present");
      }

      // Store value of specific textarea element to localstorage based on 
      // the parent of the textarea using key generated by the parent's ID
      var savedUserText = localStorage.getItem(timeBlockID);
      var userTextBox = $(this).find("> textarea");

      console.log(savedUserText);
      $(userTextBox).val(savedUserText);

    });
  });

// Display the current date and hour on the top of the page.
  var todayDate = dayjs();
  $("#currentDay").text(todayDate.format("dddd, MMMM D, YYYY - h A"));
  console.log(todayDate);
});